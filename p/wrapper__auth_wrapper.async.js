"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[688],{51561:function(Lr,ar,v){v.d(ar,{WC:function(){return mr},F9:function(){return rr},fb:function(){return J},lx:function(){return or},XB:function(){return dr}});var cr=v(35290),E=v.n(cr),fr=v(411),D=v.n(fr),hr=v(58482),ir=v.n(hr),x=v(9189),pr=v.n(x),vr=v(93275),j=v.n(vr),W=v(13183),U=v(3928),_=v(70523),$=W.Z.create({baseURL:"https://laikecc.xyz",withCredentials:!0}),ur=ir()(function g(w,u){pr()(this,g),j()(this,"selfEx",!0),j()(this,"code",void 0),j()(this,"msg",void 0),this.code=w,this.msg=u});$.interceptors.response.use(function(){var g=D()(E()().mark(function w(u){return E()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(console.log(u.data),u.data.code==0){y.next=7;break}if(u.data.code!=4003){y.next=5;break}return _.m8.push("/login"),y.abrupt("return",Promise.reject("login required"));case 5:return U.FN.show(u.data.error_msg),y.abrupt("return",Promise.reject(new ur(u.data.code,u.data.msg)));case 7:return y.abrupt("return",u);case 8:case"end":return y.stop()}},w)}));return function(w){return g.apply(this,arguments)}}(),function(){var g=D()(E()().mark(function w(u){return E()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(console.log("listen error"),console.log(u),!u.selfEx){y.next=5;break}return U.FN.show(u.msg),y.abrupt("return",Promise.reject(u));case 5:return U.FN.show("\u7F51\u7EDC\u9519\u8BEF"),y.abrupt("return",Promise.reject(u));case 7:case"end":return y.stop()}},w)}));return function(w){return g.apply(this,arguments)}}());function J(g){return K.apply(this,arguments)}function K(){return K=D()(E()().mark(function g(w){return E()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,$.get("/api/p/poetry/get/"+w,{});case 2:return R.abrupt("return",R.sent.data.result);case 3:case"end":return R.stop()}},g)})),K.apply(this,arguments)}function or(g){return N.apply(this,arguments)}function N(){return N=D()(E()().mark(function g(w){return E()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,$.post("/api/p/user/login",w);case 2:return R.abrupt("return",R.sent.data.result);case 3:case"end":return R.stop()}},g)})),N.apply(this,arguments)}function dr(){return V.apply(this,arguments)}function V(){return V=D()(E()().mark(function g(){return E()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,$.post("/api/p/user/logout",{});case 2:return u.abrupt("return",u.sent.data.result);case 3:case"end":return u.stop()}},g)})),V.apply(this,arguments)}function rr(){return er.apply(this,arguments)}function er(){return er=D()(E()().mark(function g(){return E()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,$.post("/api/p/user/me",{});case 2:return u.abrupt("return",u.sent.data.result);case 3:case"end":return u.stop()}},g)})),er.apply(this,arguments)}function Er(){return H.apply(this,arguments)}function H(){return H=_asyncToGenerator(_regeneratorRuntime().mark(function g(){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,API_CLI_INS.post("/api/p/user/me/required",{});case 2:return u.abrupt("return",u.sent.data.result);case 3:case"end":return u.stop()}},g)})),H.apply(this,arguments)}function mr(g){return tr.apply(this,arguments)}function tr(){return tr=D()(E()().mark(function g(w){var u;return E()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return u={},Object.assign(u,w),u.trigger_time=w.trigger_time.getTime(),y.next=5,$.post("/api/p/sch/add",u);case 5:return y.abrupt("return",y.sent.data.result);case 6:case"end":return y.stop()}},g)})),tr.apply(this,arguments)}},83350:function(Lr,ar,v){v.r(ar),v.d(ar,{default:function(){return kr}});var cr=v(35290),E=v.n(cr),fr=v(411),D=v.n(fr),hr=v(46686),ir=v.n(hr),x=v(70523),pr=v(51561),vr=v(3928),j=v(93236),W=function(n){return typeof n.children=="function"?j.createElement(j.Fragment,null,n.children()):j.createElement(j.Fragment,null,n.children||null)},U=function(n){return W(n)};U.defaultProps={children:null};var _=function(n){return W(n)};_.defaultProps={children:null};var $=function(n){return W(n)},ur=function(n){return W(n)},J=function(n){var a=Boolean(typeof n=="function"?n():n);return a};function K(o,n,a,l,c,f,d){try{var h=o[f](d),S=h.value}catch(G){a(G);return}h.done?n(S):Promise.resolve(S).then(l,c)}function or(o){return function(){var n=this,a=arguments;return new Promise(function(l,c){var f=o.apply(n,a);function d(S){K(f,l,c,d,h,"next",S)}function h(S){K(f,l,c,d,h,"throw",S)}d(void 0)})}}function N(){return N=Object.assign||function(o){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])}return o},N.apply(this,arguments)}function dr(o,n){return n={exports:{}},o(n,n.exports),n.exports}var V=dr(function(o){var n=function(a){var l=Object.prototype,c=l.hasOwnProperty,f,d=typeof Symbol=="function"?Symbol:{},h=d.iterator||"@@iterator",S=d.asyncIterator||"@@asyncIterator",G=d.toStringTag||"@@toStringTag";function p(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{p({},"")}catch(e){p=function(r,t,s){return r[t]=s}}function P(e,r,t,s){var i=r&&r.prototype instanceof k?r:k,A=Object.create(i.prototype),L=new wr(s||[]);return A._invoke=Ir(e,t,L),A}a.wrap=P;function M(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(s){return{type:"throw",arg:s}}}var Q="suspendedStart",F="suspendedYield",Y="executing",I="completed",m={};function k(){}function X(){}function z(){}var C={};p(C,h,function(){return this});var yr=Object.getPrototypeOf,sr=yr&&yr(yr(Ar([])));sr&&sr!==l&&c.call(sr,h)&&(C=sr);var q=z.prototype=k.prototype=Object.create(C);X.prototype=z,p(q,"constructor",z),p(z,"constructor",X),X.displayName=p(z,G,"GeneratorFunction");function Rr(e){["next","throw","return"].forEach(function(r){p(e,r,function(t){return this._invoke(r,t)})})}a.isGeneratorFunction=function(e){var r=typeof e=="function"&&e.constructor;return r?r===X||(r.displayName||r.name)==="GeneratorFunction":!1},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,z):(e.__proto__=z,p(e,G,"GeneratorFunction")),e.prototype=Object.create(q),e},a.awrap=function(e){return{__await:e}};function lr(e,r){function t(A,L,b,O){var T=M(e[A],e,L);if(T.type==="throw")O(T.arg);else{var Sr=T.arg,nr=Sr.value;return nr&&typeof nr=="object"&&c.call(nr,"__await")?r.resolve(nr.__await).then(function(Z){t("next",Z,b,O)},function(Z){t("throw",Z,b,O)}):r.resolve(nr).then(function(Z){Sr.value=Z,b(Sr)},function(Z){return t("throw",Z,b,O)})}}var s;function i(A,L){function b(){return new r(function(O,T){t(A,L,O,T)})}return s=s?s.then(b,b):b()}this._invoke=i}Rr(lr.prototype),p(lr.prototype,S,function(){return this}),a.AsyncIterator=lr,a.async=function(e,r,t,s,i){i===void 0&&(i=Promise);var A=new lr(P(e,r,t,s),i);return a.isGeneratorFunction(r)?A:A.next().then(function(L){return L.done?L.value:A.next()})};function Ir(e,r,t){var s=Q;return function(A,L){if(s===Y)throw new Error("Generator is already running");if(s===I){if(A==="throw")throw L;return Pr()}for(t.method=A,t.arg=L;;){var b=t.delegate;if(b){var O=Cr(b,t);if(O){if(O===m)continue;return O}}if(t.method==="next")t.sent=t._sent=t.arg;else if(t.method==="throw"){if(s===Q)throw s=I,t.arg;t.dispatchException(t.arg)}else t.method==="return"&&t.abrupt("return",t.arg);s=Y;var T=M(e,r,t);if(T.type==="normal"){if(s=t.done?I:F,T.arg===m)continue;return{value:T.arg,done:t.done}}else T.type==="throw"&&(s=I,t.method="throw",t.arg=T.arg)}}}function Cr(e,r){var t=e.iterator[r.method];if(t===f){if(r.delegate=null,r.method==="throw"){if(e.iterator.return&&(r.method="return",r.arg=f,Cr(e,r),r.method==="throw"))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var s=M(t,e.iterator,r.arg);if(s.type==="throw")return r.method="throw",r.arg=s.arg,r.delegate=null,m;var i=s.arg;if(!i)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m;if(i.done)r[e.resultName]=i.value,r.next=e.nextLoc,r.method!=="return"&&(r.method="next",r.arg=f);else return i;return r.delegate=null,m}Rr(q),p(q,G,"Generator"),p(q,h,function(){return this}),p(q,"toString",function(){return"[object Generator]"});function Or(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function gr(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function wr(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Or,this),this.reset(!0)}a.keys=function(e){var r=[];for(var t in e)r.push(t);return r.reverse(),function s(){for(;r.length;){var i=r.pop();if(i in e)return s.value=i,s.done=!1,s}return s.done=!0,s}};function Ar(e){if(e){var r=e[h];if(r)return r.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t=-1,s=function i(){for(;++t<e.length;)if(c.call(e,t))return i.value=e[t],i.done=!1,i;return i.value=f,i.done=!0,i};return s.next=s}}return{next:Pr}}a.values=Ar;function Pr(){return{value:f,done:!0}}return wr.prototype={constructor:wr,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(gr),!e)for(var r in this)r.charAt(0)==="t"&&c.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=f)},stop:function(){this.done=!0;var e=this.tryEntries[0],r=e.completion;if(r.type==="throw")throw r.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function t(O,T){return A.type="throw",A.arg=e,r.next=O,T&&(r.method="next",r.arg=f),!!T}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],A=i.completion;if(i.tryLoc==="root")return t("end");if(i.tryLoc<=this.prev){var L=c.call(i,"catchLoc"),b=c.call(i,"finallyLoc");if(L&&b){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(L){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else if(b){if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.tryLoc<=this.prev&&c.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&(e==="break"||e==="continue")&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var A=i?i.completion:{};return A.type=e,A.arg=r,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(A)},complete:function(e,r){if(e.type==="throw")throw e.arg;return e.type==="break"||e.type==="continue"?this.next=e.arg:e.type==="return"?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):e.type==="normal"&&r&&(this.next=r),m},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),gr(t),m}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var s=t.completion;if(s.type==="throw"){var i=s.arg;gr(t)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,t){return this.delegate={iterator:Ar(e),resultName:r,nextLoc:t},this.method==="next"&&(this.arg=f),m}},a}(o.exports);try{regeneratorRuntime=n}catch(a){typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}});function rr(o){return typeof o=="function"}function er(o){return Reflect.has(o,"then")&&rr(o.then)}function Er(o){return Reflect.has(o,"catch")&&rr(o.catch)}function H(o){return typeof o!="object"||o===null?!1:o instanceof Promise||o!==Promise.prototype&&er(o)&&Er(o)}var mr=function(n,a){if(!Array.isArray(n)||!Array.isArray(a))throw new Error("shallowArraysEqual only accepts arrays as parameters");if(n.length!==a.length)return!1;for(var l=0;l<n.length;++l)if(n[l]!==a[l])return!1;return!0},tr=function(n){if(!H(n))throw new Error("Argument of createCancellablePromise should be a Promise");var a={value:!1},l=new Promise(function(){var c=or(V.mark(function f(d,h){var S;return V.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,n;case 3:return S=p.sent,p.abrupt("return",!a.value&&d(S));case 7:p.prev=7,p.t0=p.catch(0),!a.value&&h(p.t0);case 10:case"end":return p.stop()}},f,null,[[0,7]])}));return function(f,d){return c.apply(this,arguments)}}());return Object.keys(n).forEach(function(c){l[c]=n[c]}),{promise:l,cancel:function(){a.value=!0}}},g=function(n,a){a===void 0&&(a=[]);var l=useRef(!1),c=useRef([]);if(typeof n!="function")throw new Error("Incorrect callback parameter for useSingleton hook; expected a function, but got: '"+typeof n+"'.");if(!Array.isArray(a))throw new Error("Incorrect dependencies parameter for useSingleton; expected an array, but got: '"+typeof a+"'.");var f=Array.isArray(a)&&a.length>0;if(f){var d=!mr(c.current,a);if(d)c.current=a;else if(l.current)return}else if(l.current)return;n(),l.current=!0},w=function(n){return W(n)};function u(o){var n=o.promise,a=o.keepAlive,l=a===void 0?!1:a,c=o.children,f=useState(null),d=f[0],h=f[1],S=useState(null),G=S[0],p=S[1],P=useMemo(function(){return tr(n)},[n]),M=useRef([]);if(useEffect(function(){return function(){l||P.cancel()}},[P,P.promise,l]),g(or(V.mark(function k(){var X;return V.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return h(null),p(null),C.prev=2,C.next=5,P.promise;case 5:X=C.sent,p(X),h(!0),M.current.push(P),C.next=16;break;case 11:C.prev=11,C.t0=C.catch(2),p(C.t0),h(!1),M.current.push(P);case 16:case"end":return C.stop()}},k,null,[[2,11]])})),[P.promise]),!c||!H(n))return null;if(d===null){var Q=React.Children.toArray(c).find(function(k){return k.type===ur});return React.createElement(Fragment,null,Q||null)}if(!d){var F=React.Children.toArray(c).find(function(k){return k.type===$});if(!F)return React.createElement(Fragment,null,null);var Y=F;return typeof F.props.children=="function"&&(Y=N({},F,{props:N({},F.props,{children:function(){return F.props.children(G,M.current,P.promise)}})})),React.createElement(Fragment,null,Y)}var I=React.Children.toArray(c).find(function(k){return k.type===w});if(!I)return React.createElement(Fragment,null,null);var m=I;return typeof I.props.children=="function"&&(m=N({},I,{props:N({},I.props,{children:function(){return I.props.children(G,M.current,P.promise)}})})),React.createElement(Fragment,null,m)}function R(o,n){}var y=function(n){var a=n.condition,l=n.keepAlive,c=l===void 0?!1:l,f=n.children;if(!f)return null;if(!Array.isArray(f)&&!(f.type===$||f.type===w)||React.Children.toArray(f).every(function(h){return h.type===$||h.type===w||h.type===ur}),H(a))return React.createElement(u,{promise:a,keepAlive:c},f);var d=J(a);return React.createElement(Fragment,null,React.Children.toArray(f).find(function(h){return h.type!==$!=!d})||null)},br=function(n){var a,l,c=n.children,f=void 0,d=void 0;return rr(c)&&(c=c()),j.Children.forEach(c,function(h){if(!!j.isValidElement(h))if(!f&&h.type===U){var S=h.props.condition,G=J(S);G&&(f=h)}else!d&&h.type===_&&(d=h)}),(a=(l=f)!=null?l:d)!=null?a:null},Tr=function(n){var a=n.condition,l=n.children,c=Boolean(J(a));return!c&&l?W({children:l}):null};Tr.defaultProps={children:null};var jr=function(n){var a=n.condition,l=n.children,c=Boolean(J(a));return c&&l?W({children:l}):null};jr.defaultProps={children:null};var B=v(62086),Gr=function(n){var a=j.useState(),l=ir()(a,2),c=l[0],f=l[1],d=j.useState(!0),h=ir()(d,2),S=h[0],G=h[1],p=(0,x.TH)(),P="/login?redirect_path="+encodeURI(p.pathname+p.search),M=function(){var Q=D()(E()().mark(function F(){var Y;return E()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log(p.pathname),m.prev=1,m.next=4,(0,pr.F9)();case 4:Y=m.sent,f(Y),m.next=10;break;case 8:m.prev=8,m.t0=m.catch(1);case 10:G(!1);case 11:case"end":return m.stop()}},F,null,[[1,8]])}));return function(){return Q.apply(this,arguments)}}();return j.useEffect(function(){M()},[]),(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(br,{children:[(0,B.jsx)(U,{condition:S,children:(0,B.jsx)(vr.k_,{})}),(0,B.jsx)(U,{condition:!S&&(c==null?void 0:c.uid),children:(0,B.jsx)(x.j3,{})}),(0,B.jsx)(_,{children:(0,B.jsx)(x.Fg,{to:P})})]})})},kr=Gr}}]);
